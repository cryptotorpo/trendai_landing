"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[265],{1265:function(e,n,r){r.r(n),r.d(n,{CommunicationScene:function(){return T}});var t=r(2729),o=r(5893),a=r(1673),i=r(1128),l=r(7294),u=r(9462),s=r(9542),c=r(1715);let f=()=>{let e=(0,c.Lm)(),n=(0,l.useMemo)(()=>[{y:0,alpha:1},{y:0,alpha:1},{y:-100,alpha:.25},{y:-400,alpha:0},{y:-800,alpha:0}],[e]);return[function(e){return n.map(n=>n[e])},n]};var v=r(7503);let g=s.t7,p=(0,l.forwardRef)((e,n)=>{let{progressRef:r}=e,t=(0,l.useRef)(),c=(0,l.useRef)(),p=(0,l.useRef)({value:0}),m=(0,l.useRef)({value:0}),d=(0,l.useRef)({value:0}),h=(0,l.useRef)(null);(0,l.useImperativeHandle)(n,()=>t.current);let[x,y]=f(),b=(0,l.useRef)(0),F=(0,l.useRef)({x:0,y:0});(0,l.useEffect)(()=>{let e=e=>{let n=e.clientX/window.innerWidth*2-1,r=-(e.clientY/window.innerHeight*2)+1;F.current={x:n,y:r}};return window.addEventListener("pointermove",e),()=>{window.removeEventListener("pointermove",e)}},[]),(0,i.F)(e=>{let{clock:n}=e;if(!c.current)return;p.current.value=n.getElapsedTime(),b.current=(0,s.t7)(b.current,r.current,.075);let o=(0,u.xD)(v.V9.current,0,5,0,1);m.current.value=o;let a=.8*o;c.current.rotation.y=g(.05*Math.sin(n.getElapsedTime()),0,a),h.current&&(h.current.rotation.y=g((0,s.t7)(h.current.rotation.y,.25*F.current.x,.1),0,a),h.current.rotation.x=g((0,s.t7)(h.current.rotation.x,-(.25*F.current.y),.1),0,a)),t.current.position.y=(0,u.o5)(x("y"),o*y.length),d.current.value=(0,u.o5)(x("alpha"),o*y.length)});let P=(0,a.L)("/models/hero.glb"),_=(0,l.useMemo)(()=>{let e=P.scene.clone();return e.traverse(e=>{if(null==e?void 0:e.material){let n=e.material.clone();n.transparent=!0,n.onBeforeCompile=e=>{e.uniforms.uTime=p.current,e.uniforms.uProgress=m.current,e.uniforms.uAlpha=d.current,e.uniforms.uEnableFade={value:"SVGMat"!==n.name},e.vertexShader="\n                        varying vec2 vUv;\n                        varying vec3 vPosition;\n                    "+e.vertexShader.replace("void main() {","\n                        void main() {\n                            vUv = uv;\n                            vPosition = position;\n                    "),e.fragmentShader="\n                        varying vec2 vUv;\n                        varying vec3 vPosition;\n    \n                        uniform float uTime;\n                        uniform float uProgress;\n                        uniform float uAlpha;\n                        uniform bool uEnableFade;\n    \n                        ".concat(u.Th,"\n    \n                    ")+e.fragmentShader.replace("#include <dithering_fragment>","\n                        #include <dithering_fragment>\n                        float frequency = 2.;\n                        float strength = .3;\n                        float t = uTime * 0.01;\n                        float noise = perlin4d(vec4(vec3(vPosition.x, vPosition.z, t) * frequency, 1.)) * strength ;\n                        gl_FragColor.rgb += gl_FragColor.rgb * noise;\n                        gl_FragColor.r *= -.1;\n                        \n                        float cropBack = smoothstep(-1., .5, vPosition.z);\n                        float cropFront = 1. - smoothstep(0., .5, vPosition.z);\n                        float crop = cropFront;\n                        float alpha = clamp(0., 1., uAlpha);\n\n                        if (!uEnableFade) {\n                            crop = 1.;\n                            // gl_FragColor.rgb *= alpha;\n                            // alpha = 1.;\n                        } else {\n                            // gl_FragColor.rgb *= 0.8;\n                        }\n                        // if (crop < 0.1) {\n                        //     discard;\n                        // }\n                        gl_FragColor.a *= alpha * crop;\n                    ")},e.material=n,e.material.needsUpdate=!0}}),e},[P]);return(0,o.jsx)("group",{ref:t,children:(0,o.jsx)("group",{ref:h,scale:950,position:[0,0,0],children:(0,o.jsx)("primitive",{ref:c,object:_})})})});var m=r(6493),d=r(6631),h=r(4091);let x=()=>{let{gl:e}=(0,i.D)(),n=(0,h.Z)(e=>e.setIsSceneReady);(0,l.useEffect)(()=>{let r;return r=setInterval(()=>{var t;let o=(null===(t=e.info.programs)||void 0===t?void 0:t.length)||0;e.info.render.frame>0&&o>0&&(setTimeout(()=>{n(!0)},500),r&&clearInterval(r))},100),()=>clearInterval(r)},[e,n])},y=e=>{let{progressRef:n}=e,r=(0,l.useRef)(null),t=(0,l.useRef)(null),a=(0,l.useRef)({value:0}),c=(0,l.useRef)({value:0}),f=(0,l.useRef)({value:0});x();let g=(0,l.useRef)(0);return(0,i.F)(e=>{let{clock:r,pointer:o}=e;a.current.value=r.getElapsedTime(),g.current=(0,s.t7)(g.current,n.current,.075);let i=(0,u.xD)(v.V9.current,0,5,0,1);c.current.value=i,f.current.value=(0,u.xD)(i,.8,1,0,1),t.current&&(t.current.position.x=(0,s.t7)(t.current.position.x,200*o.x,.1))}),(0,d._)(t,{addScale:{x:30,y:20},distance:2e3}),(0,o.jsx)("group",{ref:r,children:(0,o.jsxs)(m.JO,{ref:t,args:[1,1,1,1],position:[0,0,-1e3],rotation:[0,0,0],renderOrder:-1,children:[(0,o.jsx)("meshStandardMaterial",{transparent:!0,color:16777215,onBeforeCompile:e=>{e.uniforms.uTime=a.current,e.uniforms.uProgress=c.current,e.uniforms.uFade=f.current,e.vertexShader="\n                            varying vec2 vUv;\n                            varying vec3 vPosition;\n                    "+e.vertexShader.replace("void main() {","\n                            void main() {\n                                vUv = uv;\n                                vPosition = position;\n                    ").replace("#include <fog_vertex>","\n                        #include <fog_vertex>\n                        // mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n                        // vec3 scale = vec3(\n                        //     length(modelViewMatrix[0].xyz),\n                        //     length(modelViewMatrix[1].xyz),\n                        //     length(modelViewMatrix[2].xyz)\n                        // );\n                        // // size attenuation: scale *= -mvPosition.z * 0.2;\n                        // mvPosition.xyz += position * scale;\n                        // gl_Position = projectionMatrix * mvPosition;\n                    "),e.fragmentShader="\n                        varying vec2 vUv;\n                        varying vec3 vPosition;\n\n                        uniform float uTime;\n                        uniform float uProgress;\n                        uniform float uFade;\n\n                        ".concat(u.Th,"\n\n                    ")+e.fragmentShader.replace("#include <dithering_fragment>","\n                        #include <dithering_fragment>\n                        float frequency = 15.;\n                        float strength = .4;\n                        float t = uTime * 0.05;\n\n                        float noise = perlin4d(vec4(vec3(vUv.x * 10., vUv.y * 10. + uProgress * 2., t) * frequency, 1.)) * strength;\n                        gl_FragColor.rgb *= 0.7;\n                        gl_FragColor.rgb *= noise;\n                        // Fully cover\n                        gl_FragColor.rgb = min(gl_FragColor.rgb + uProgress / 10., 0.5);\n\n                        // Alpha top\n                        float staticFadeTop = 1. - smoothstep(.4, .9, vUv.y);\n                        float alphaProgress = mix(1., 1. - vUv.y, min(uProgress, 1.));\n                        float alpha = smoothstep(.3 + 1. * uFade, .6 + 1. * uFade, alphaProgress); // flip uv\n                        gl_FragColor.a *= alpha * staticFadeTop;\n                    ")}}),(0,o.jsx)(o.Fragment,{})]})})},b=()=>{let e=(0,c.Lm)(),n=(0,l.useMemo)(()=>[{z:1e3,lookY:0},{z:500,lookY:250},{z:200,lookY:500},{z:100,lookY:1e3}],[e]);return[function(e){return n.map(n=>n[e])},n]};var F=r(9948),P=r(9477);let _=e=>{let{progressRef:n}=e,[r,t]=b();(0,F.vO)();let o=(0,l.useRef)(0),a=(0,l.useRef)(new P.Vector3(0,0,0));return(0,i.F)(e=>{let{camera:i}=e;o.current=(0,s.t7)(o.current,n.current,.075);let l=(0,u.xD)(v.V9.current,0,5,0,1);i.position.z=(0,u.o5)(r("z"),l*t.length);let c=(0,u.o5)(r("lookY"),l*t.length);a.current.set(0,c,0),i.lookAt(a.current)}),null};var R=r(1952),C=r(4087),j=r(761),w=r(736),z=r(9338);function M(){let e=(0,t._)(["\n        &::before {\n            content: '';\n            position: absolute;\n            box-sizing: border-box;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            height: ",";\n            z-index: 1;\n            background: linear-gradient(to top, rgba(0, 0, 0, 1) 50%, rgba(0, 0, 0, 0) 100%);\n        }    \n    "]);return M=function(){return e},e}let S=r(8458).ZP.div.withConfig({componentId:"sc-f58e4cae-0"})(["position:absolute;top:0;left:0;width:100%;height:100%;",""],z.BC.xsm(M(),(0,z.rm)(30))),T=e=>{let{scrollTrigger:n}=e,r=(0,l.useRef)(0);return(0,R.s)({trigger:n,start:"top top",end:"bottom bottom",scrub:!0,from:{progress:"0"},to:{progress:"1"},onChange:e=>{r.current=3*e.value.progress}}),(0,o.jsx)(S,{children:(0,o.jsxs)(j.D,{dpr:1,children:[(0,o.jsx)("ambientLight",{intensity:1}),(0,o.jsx)("directionalLight",{intensity:1,position:[0,100,100]}),(0,o.jsx)(p,{progressRef:r}),(0,o.jsx)(y,{progressRef:r}),(0,o.jsx)(_,{progressRef:r}),(0,o.jsx)(w.x,{children:(0,o.jsx)(C.j,{granularity:8,charactersLimit:40})})]})})}},6631:function(e,n,r){r.d(n,{_:function(){return a}});var t=r(1128);let o=e=>e&&e.isOrthographicCamera,a=function(e){let{planeAspect:n=1,distance:r=1,addScale:a=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{planeAspect:1,distance:1,addScale:1};(0,t.F)(t=>{let{viewport:i,camera:l}=t;if(!e.current)return;let u=i.aspect,s="number"==typeof a?a:a.x,c="number"==typeof a?a:a.y;if(o(l)){let r=Math.abs(l.top)+Math.abs(l.bottom);u<n?e.current.scale.set(r*n*s,r*c,1):e.current.scale.set(r*u*s,r*u/n*c,1)}else{let t=2*Math.tan(l.fov*Math.PI/180/2)*r;u<n?e.current.scale.set(t*n*s,t*c,1):e.current.scale.set(t*u*s,t*u/n*c,1)}})}}}]);